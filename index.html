<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        KYHSS</title>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js" defer></script>
    <link href="https://fonts.googleapis.com/css2?family=Reem+Kufi:wght@400;700&family=Noto+Sans+Malayalam:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #28a745;
            --fail-color: #f5352b;
            --text-color: #333;
            --bg-color: #f4f4f4;
            --card-bg: #fff;
            --shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        body {
            font-family: Arial, sans-serif;
            background-color: var(--bg-color);
            text-align: center;
            padding: 20px;
            margin: 0;
        }


        input, select, button {
            width: 90%;
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
            border: 1px solid #ddd;
        }

        button {
            background-color: var(--primary-color);
            color: white;
            cursor: pointer;
        }


        .congratulations, .faild {
            padding: 10px;
            margin-top: 15px;
            border-radius: 8px;
            font-size: 18px;
            font-weight: bold;
            animation: fadeIn 1.5s ease-in-out;
        }

        .congratulations {
            background: var(--primary-color);
            color: white;
        }

        .faild {
            background: var(--fail-color);
            color: white;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }

        /* Congratulations Modal */
        #congratsModal {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 90%;
            max-width: 400px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
            z-index: 2000;
            padding: 20px;
            text-align: center;
            animation: popIn 0.5s ease-out;
        }

        @keyframes popIn {
            from { transform: translate(-50%, -50%) scale(0.8); opacity: 0; }
            to { transform: translate(-50%, -50%) scale(1); opacity: 1; }
        }

        #congratsModal img {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            object-fit: cover;
            margin-bottom: 15px;
            border: 3px solid var(--primary-color);
        }

        #congratsModal h2 {
            color: var(--primary-color);
            font-size: 24px;
            margin-bottom: 10px;
        }

        #congratsModal p {
            font-size: 16px;
            color: #555;
            margin-bottom: 20px;
        }

        #congratsModal button {
            width: 50%;
            background: var(--primary-color);
        }
        
       
        @media print {
            .hidePrint { display: none; }
            #progressCardContainer { width: 100%; font-size: 14px; }
        }
        .container {
            max-width: 600px;
            margin: auto;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        input, button {
            width: 90%;
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
            border: 1px solid #ddd;
        }

        button {
            background-color: #28a745;
            color: white;
            cursor: pointer;
        }

        button:hover {
            background-color: #218838;
        }
        
        .progress-card {
            background: #f9f9f9;
            border-radius: 10px;
            padding: 15px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            margin-top: 20px;
        }

        .progress-card h2 {
            color: #333;
        }

        .progress-card p {
            font-size: 14px;
            color: #555;
            text-align:left;
        }

        .progress-card table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }

        .progress-card table, th, td {
            border: 1px solid #ddd;
        }

        .progress-card th, td {
            padding: 8px;
            text-align: center;
        }

        .progress-card th {
            background: #007bff;
            color: white;
        }
#progressCardContainer {
display:flex;
margin:auto;
    width:20cm;
        max-width:20cm;
        max-height:26cm;
        width: 100%;
        padding: 5px;
        font-size: 11px; /* Adjust font size for readability */
        text-align:center;

    }
    
    #progressard .faild{
        background: #f5352b;
            color: white;
            padding: 10px;
            margin-top: 15px;
            border-radius: 8px;
            font-size: 18px;
            font-weight: bold;
            animation: fadeIn 1.5s ease-in-out;
    }
    #progressard .congratulations {
            background: #28a745;
            color: white;
            padding: 10px;
            margin-top: 15px;
            border-radius: 8px;
            font-size: 18px;
            font-weight: bold;
            animation: fadeIn 1.5s ease-in-out;
        }

        @keyframes fadeIn {

            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }

        @media screen and (max-width: 768px) {
            #notification{
                width: 95%;
                margin: 0 auto;
                background-color: antiquewhite;
                height: 90vh;
                overflow: auto;
            }
            #notification #closeNotification{
                margin: auto;
                    max-width: 30px;
                    background-color: #f5352b;
                    color: white;
                    left: 90%;
                    margin-top:0px;
                    position:absolute;
                    
            }
            img{
                margin-bottom: 0px;
                padding: 1px;
                width: 100px;
                height: 100px;
                object-fit: fill;
            }
        container{
        width:100%;
        }
        h2{
        font-size:13px;
        }
        .arabic {
            font-size: 20px;
            margin-bottom: 0px;
            font-family: 'Reem Kufi', sans-serif;
            font-weight: 100;

        }
        .malayalam {
        font-size:14px;
                font-family: sans-serif;
            }
            #campus{
            font-size:10px;
            }
    #progressCardContainer {
    width:20cm;
        max-width:20cm;
        max-height:26cm;
        width: 100%;
        padding: 5px;
        font-size: 11px; /* Adjust font size for readability */
    }

    .header {
        text-align: center;
        font-size: 11px;
    }

    .student-info {
        display: block; /* Stack elements vertically */
        text-align: center;
    }

    .table-container {
        overflow-x: auto; /* Enable horizontal scrolling for tables */
    }

    table {
        padding: 5px;
        width: 100%;
        font-size: 11px; /* Reduce table font size */
    }

    .button-container {
        text-align: center;
        padding: 10px 0;
    }

    .download-btn {
        width:fit-content;
        padding: 12px;
        font-size: 16px;
    }
    .congratulations {
            background: #28a745;
            color: white;
            padding: 10px;
            margin-top: 15px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: bold;
            animation: fadeIn 1.5s ease-in-out;
        }
}

        @media print {
        .hidePrint{
        display:none;}
    #progressCardContainer {
        width: 100%;
        font-size: 14px;
    }

    #progressard .congratulations {
            background: #28a745;
            color: rgb(9, 5, 5);
            padding: 10px;
            margin-top: 15px;
            border-radius: 8px;
            font-size: 18px;
            font-weight: bold;
            animation:none;
        }

    table {
        page-break-inside: auto;
    }

    tr {
        page-break-inside: avoid;
        page-break-after: auto;
    }
}
    </style>
</head>
<body>
    

    <div id="nonePrint">
        <div id="searchField" class="container">
            <div>
                <h3 class="arabic">KYHSS ATHAVANAD</h3>
                <img id="loginemblom3" src="https://drive.google.com/thumbnail?id=1BKHBRTLhL6xokJ-Bz8fkM3hjllsKIqvb&sz" width="100" height="100">
                <h3 class="malayalam" style="margin-top:0; margin-bottom:0.3em;">School Code: 19094 : HSS Code: 11118</h3>
                <h3 id="campus" style="margin-top: 0.2em;">PMSA ORPHANAGE CAMPUS KATTILANGADI</h3>
            </div>
            <h2 style="color:red">Annual Examination Result</h2>
            <input type="text" id="searchAdnumber" placeholder="Enter AD Number">
            <label for="searchClass">Select Class:</label>
            <select id="searchClass" onchange="displayGradingCriteria('6')">
                <option value="">-- Select Class --</option>
                <option value="LKG">LKG</option>
                <option value="UKG">UKG</option>
            </select>
            <input type="text" id="searchDivision" placeholder="Enter Division" onchange="capitalizeDivision('searchDivision')">
            <button id="searchBtn">Get Result</button>
            <div id="loadingColor" style="display: none;">Loading....your Results....</div>
        </div>

        <div id="printBtn" class="hidePrint" style="display:none; text-align:right; margin:10px;">
            <button style="width:fit-content; margin-right:5px;" onclick="printProgressCard()">Print</button>
            <button onclick="gotoSearch()" style="width:fit-content; background-color:blue; color:white;">Check Another Result</button>
        </div>

        <!-- Congratulations Modal -->
        <div id="congratsModal">
            <img id="studentPhoto" src="" alt="Student Photo">
            <h2>🎉 Congratulations! 🎉</h2>
            <p id="congratsMessage"></p>
            <button onclick="closeCongratsModal()">Proceed to Progress Card</button>
        </div>

        <div id="progressCardContainer"></div>
        <div id="notification" style="display: none; 
     width: 100%;
    background: white;
    border-radius: 12px;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
    z-index: 1000;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    overflow: hidden;
    transition: all 0.3s ease;
    border: 1px solid rgba(0, 123, 255, 0.3);
    overflow-y: auto;
    ">
    
    <div id="notificationHeader" style="
    position: sticky;
    top:0px;
        background: linear-gradient(135deg, #007bff, #00b4ff);
        color: white;
        padding: 15px 20px;
        display: flex;
        justify-content: space-between;
        align-items: center;">
        
        <h3 style="margin: 0; font-weight: 600;">KYHSS ATHAVANAD</h3>
        <button id="closeNotification"onclick=" closeNotification() " style="
            display: none;
            background: none;
            border: none;
            color: white;
            font-size: 20px;
            cursor: pointer;
            padding: 0 5px;">×</button>
    </div>
    
    <div id="notificationMessage" style="padding: 20px;">
        <p style="
            font-size: 18px;
            color: #333;
            margin-bottom: 15px;
            font-weight: 500;">
            <strong>Notification About Annual Term</strong>
        </p>
        
        <div style="
            
            background: #f9fbfa;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
            border-left: 4px solid #007bff;">
            <h4 style="margin: 0 0 10px 0; color: #495057;">
                <strong>promotion Criteria</strong>
            </h4>
            <p id="criteria" style="margin: 0; color: #6c757d; line-height: 1;">
                <!-- Your notification content here -->
                 <br>
                <li style="color: #317c41;" >"Students who achieved a TE mark of 30% or above were considered proficient and passed the exam."
        
                </li>
                <br>
                <hr>
                <li style="color: #e65954;">
                    "Any student with an insufficient TE mark, falling below 30%, was marked as failed."
                </li>
                <hr>
                <br>
                <div style="align-content: center; width: 100%; text-align: center;justify-items: center;">
                    <br>
                    <strong>Grading criteria</strong>
                    <br>
                    <hr>
                    <table border="1" style="width: 100%; border-collapse: collapse; border: 1px solid #000000; font-size: 14px;">
                        <thead style="border: 1px solid #000000;">
                            <td>Percentage </td>
                            <td> grade </td>
            
                        </thead>
                        <tbody id="gradeCriteria"></tbody>
                    </table>
                </div>
                
            </p>
            
        </div>
       
        <button id="getResultBtn"onclick=" closeNotification() " style="
            display: none;
            width: 100%;
            background: linear-gradient(135deg, #28a745, #20c997);
            color: rgb(232, 228, 228);
            border: none;
            padding: 12px;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            margin-top: 10px;">
            Get Result
        </button>
        
    </div>
    
        </div>
    </div>
    <div id="printArea" style="display: none;">
        <div style="display: flex; justify-content: right;">
            <button class="hidePrint" style="width: fit-content;" onclick="togglePrint();">Close</button>
            <button class="download-btn hidePrint" onclick="downloadPDF()">Download PDF</button>
        </div>
        <div style="max-width:20cm; max-height:27cm; margin:10px;" id="printContents"></div>
    </div>

    <script>
        function capitalizeDivision(id) {
            const input = document.getElementById(id);
            if (input) input.value = input.value.toUpperCase();
        }

        function loading(is) {
            const div = document.getElementById("loadingColor");
            div.style.display = is;
            div.style.color = randomColor();
            let intervalId = setInterval(() => div.style.color = randomColor(), 50);
            setTimeout(() => clearInterval(intervalId), 5000);

            function randomColor() {
                return "#" + Math.floor(Math.random() * 1677721).toString(16);
            }
        }

        function displayGradingCriteria(className) {
        

// To show the close button (if needed)
document.getElementById('closeNotification').style.display = 'block';
  const gradeCriteriaTable = document.getElementById("gradeCriteria");
  gradeCriteriaTable.innerHTML = ""; // Clear previous content

  let gradingSystem = [];

  if (className > "7") {
    // Grading system for classes above 7 (A+, A, B, etc.)
    gradingSystem = [
      { percentage: "90-100", grade: "A+" },
      { percentage: "80-89", grade: "A" },
      { percentage: "70-79", grade: "B+" },
      { percentage: "60-69", grade: "B" },
      { percentage: "50-59", grade: "C+" },
      { percentage: "40-49", grade: "C" },
      { percentage: "30-39", grade: "D+" },
      { percentage: "Below 40", grade: "D" }, // Or "Fail"
    ];
  } else {
    // Grading system for classes 7 and below (A, B, C, D, E)
    gradingSystem = [
      { percentage: "85-100", grade: "A" },
      { percentage: "70-84", grade: "B" },
      { percentage: "55-69", grade: "C" },
      { percentage: "30-54", grade: "D" },
      
      { percentage: "Below 30", grade: "F" }, // Or "Fail"
    ];
  }

  // Populate the table
  gradingSystem.forEach((criteria) => {
    const row = document.createElement("tr");
    const percentageCell = document.createElement("td");
    const gradeCell = document.createElement("td");

    percentageCell.textContent = criteria.percentage;
    gradeCell.textContent = criteria.grade;

    row.appendChild(percentageCell);
    row.appendChild(gradeCell);
    gradeCriteriaTable.appendChild(row);
  });
}
function closeNotification(){
// To show the notification
document.getElementById('notification').style.display = 'none';

// To show the close button (if needed)
document.getElementById('closeNotification').style.display = 'none';
document.getElementById('progressCardContainer').style.display = 'block';


}

// To show the Get Result button
document.getElementById('getResultBtn').style.display = 'block';

        function gotoSearch() {
            document.getElementById("searchField").style.display = "block";
            document.getElementById("progressCardContainer").style.display = "none";
            document.getElementById("printBtn").style.display = "none";
        }

        function togglePrint() {
            document.getElementById("nonePrint").style.display = "block";
            document.getElementById("printArea").style.display = "none";
        }

        async function downloadPDF() {
            const element = await document.getElementById("printContents"); // Target the progress card container
            html2pdf().from(element).save("Progress_Card.pdf");
        }


        function printProgressCard() {
            const progressCardContainer = document.getElementById("progressCardContainer");
            const printArea = document.getElementById("printArea");
            const printContents = document.getElementById("printContents");
            const nonePrintElements = document.getElementById("nonePrint");

            printContents.innerHTML = progressCardContainer.innerHTML;
            printArea.style.display = "block";
            nonePrintElements.style.display = "none";
            setTimeout(() => {
                window.print();
            }, 500);
        }

        function closeCongratsModal() {
            document.getElementById("congratsModal").style.display = "none";
            document.getElementById("progressCardContainer").style.display = "flex";
            document.getElementById("printBtn").style.display = "flex";
            document.getElementById("searchField").style.display = "none";
            document.getElementById('notification').style.display = 'block';
        }

        function getGrade(maxMark, obtMark, clason) {
            const percentage = (obtMark / maxMark) * 100;
            if (clason > 7) {
                if (percentage >= 90) return "A+";
                if (percentage >= 80) return "A";
                if (percentage >= 70) return "B+";
                if (percentage >= 60) return "B";
                if (percentage >= 50) return "C+";
                if (percentage >= 40) return "C";
                if (percentage >= 30) return "D+";
                return "D";
            } else {
                if (percentage >= 85) return "A";
                if (percentage >= 70) return "B";
                if (percentage >= 55) return "C";
                if (percentage >= 30) return "D";
                return "F";
            }
        }
    </script>

    <script type="module">
        import { db } from "/score/firebase-config.js";
        import { collection, getDocs, query, where } from "https://www.gstatic.com/firebasejs/11.3.1/firebase-firestore.js";

        document.getElementById("searchBtn").addEventListener("click", async () => {
            const adnumber = document.getElementById("searchAdnumber").value.trim();
            const studentClass = document.getElementById("searchClass").value.trim();
            const division = document.getElementById("searchDivision").value.trim();

            if (!adnumber || !studentClass || !division) {
                alert("❌ Please enter all details.");
                return;
            }

            loading('block');
            try {
                const querySnapshot = await getDocs(query(
                    collection(db, "kgMarks"),
                    where("adnumber", "==", adnumber.split("_")[0] === "ad" ? adnumber.split("_")[1] : adnumber),
                    where("class", "==", `${studentClass} ${division}`)
                ));

                if (querySnapshot.empty) {
                    alert("❌ No records found for this student.");
                    loading('none');
                    return;
                }

                let studentData = [];
                let studentInfo = {};

                querySnapshot.forEach((doc) => {
                    const data = doc.data();
                    studentData = processSubjects(data);
                    studentInfo = {
                        name: data.name,
                        class: data.class,
                        adnumber: data.adnumber,
                        fee: data.fee,
                        photoid: data.picId || ""
                    };
                });

                displayResult(adnumber, studentInfo, studentData);
            } catch (error) {
                console.error("❌ Error fetching student data:", error);
                alert("❌ Error fetching data: " + error.message);
            } finally {
                loading('none');
            }
        });

        function processSubjects(data) {
            const subjectOrder = ["ARABIC", "MALAYALAM", "ENGLISH", "HINDI", "EVS", "BS", "G K", "BIOLOGY", "CHEMISTRY", "PHYSICS", "SS1", "MATHS", "I T", "PT"];
            const studentData = [];
            if (Array.isArray(data.subjects)) {
                const subjectsMap = new Map();
                data.subjects.forEach(sub => subjectsMap.set(sub.subject, sub));
                subjectOrder.forEach(subjectName => {
                    if (subjectsMap.has(subjectName)) {
                        const sub = subjectsMap.get(subjectName);
                        studentData.push({
                            subject: sub.subject,
                            maxTeMark: sub.maxMark.split('_')[0],
                            obtTeMark: sub.obtMark.split('_')[0],
                            maxCeMark: sub.maxMark.split('_')[1],
                            obtCeMark: sub.obtMark.split('_')[1],
                        });
                    }
                });
            }
            return studentData;
        }

        function displayResult(adnumber, studentInfo, studentData) {
            if (adnumber.split("_")[0] !== "ad" && studentInfo.fee >= 1000) {
                resultHold(studentInfo);
            } else {
                let totalMarks = 0, obtainedMarks = 0, hasFailed = false, abcount = 0;
                const clason = parseInt(studentInfo.class.split(' ')[0]) || 0;

                let progressHTML = `
                    <div id="progressCard">
                        <img id="loginemblom3" src="https://drive.google.com/thumbnail?id=1BKHBRTLhL6xokJ-Bz8fkM3hjllsKIqvb&sz=800" width="150" height="150">
                        <h1 class="arabic" style="margin-bottom:0px;">KYHSS ATHAVANAD</h1>
                        <h2 style="margin-top:0px;margin-bottom:0.3em;" class="malayalam">School Code: 19094; HSS Code:11118</h2>
                        <h3 style="margin-top: 0.2em;">PMSA ORPHANAGE CAMPUS KATTILANGADI</h3>
                        <div class="progress-card">
                            <p style="display: flex; gap: 10px; font-size:16px;"><strong>Name of Student: </strong><span style="color:red; font-weight:bold;">${studentInfo.name}</span></p>
                            <p style="font-size:16px;"><strong>Admission Number:</strong> ${studentInfo.adnumber}</p>
                            <p style="font-size:16px;"><strong>Class:</strong> ${studentInfo.class}</p>
                            <table border="1" cellspacing="0" cellpadding="5" style="width: 100%; text-align: center;">
                                <tr>
                                    <th>Subject</th>
                                    <th>Te Marks</th>
                                    <th>Ce Marks</th>
                                    <th>Grade</th>
                                    <th>Status</th>
                                </tr>
                `;

                studentData.forEach((subject) => {
                    const totalObt = (parseFloat(subject.obtTeMark) || 0) + (parseFloat(subject.obtCeMark) || 0);
                    const totalMax = (parseFloat(subject.maxTeMark) || 0) + (parseFloat(subject.maxCeMark) || 0);
                    const grade = getGrade(totalMax, totalObt, clason);
                    const isPassed = ((parseFloat(subject.obtTeMark) || 0) / (parseFloat(subject.maxTeMark) || 0)) * 100 >= 30;
                    const statusIcon = isPassed ? 'P' : 'F';
                    const rowStyle = isPassed ? "" : 'style="background-color: #ffcccc; font-weight: bold;"';

                    if (subject.obtTeMark === "Ab") abcount++;
                    if (!isPassed) hasFailed = true;

                    progressHTML += `
                        <tr ${rowStyle}>
                            <td>${subject.subject}</td>
                            <td>${subject.obtTeMark}/${subject.maxTeMark}</td>
                            <td>${subject.obtCeMark}/${subject.maxCeMark}</td>
                            <td>${grade}</td>
                            <td>${statusIcon}</td>
                        </tr>
                    `;

                    totalMarks += totalMax;
                    obtainedMarks += totalObt;
                });

                const percentage = ((obtainedMarks / totalMarks) * 100).toFixed(2);
                progressHTML += `
                            </table>
                            <div style="text-align: left;">
                                <p><strong>Total Marks:</strong> ${obtainedMarks} / ${totalMarks}</p>
                                <div style="display: flex; justify-content: space-between; margin:1px;">
                                    <p><strong>Percentage:</strong> ${percentage}%</p>
                                    <span>Result: 
                                        <span style="font-size:12px; padding: 4px; border: 1px solid #ccc; border-radius: 1px; background-color: ${hasFailed ? '#efafaf' : '#abd8b5'}; color: ${hasFailed ? 'red' : 'green'};" id="status">${hasFailed ? (clason > 6 ? 'Failed - ReAppear' : 'Failed - Promoted') : 'Passed'}</span>
                                    </span>
                                </div>
                            </div>
                            ${!hasFailed ? `<div class="congratulations hidePrint">🎉 Congratulations! You have passed successfully! 🎉</div>` : ''}
                        </div>
                    </div>
                `;

                if (abcount > 5) {
                    document.getElementById("progressCardContainer").innerHTML = `
                        <p style="color:red; font-size:18px; background-color:orange;">
                            Your result has been withheld by the office. <br>
                            <h3>Reasons:</h3>
                            <li>SSLC Scribe Helping Examiners</li>
                            <li>Continuous Absenteeism (more than 5 subjects)</li>
                        </p>`;
                    document.getElementById("progressCardContainer").style.display = "flex";
                    document.getElementById("printBtn").style.display = "flex";
                    document.getElementById("searchField").style.display = "none";
                } else if (!hasFailed) {
                    // Show Congratulations Modal
                    const photoUrl = studentInfo.photoid ? `https://drive.google.com/thumbnail?id=${studentInfo.photoid}&sz=800` : "https://drive.google.com/thumbnail?id=1BKHBRTLhL6xokJ-Bz8fkM3hjllsKIqvb&sz";
                    document.getElementById("studentPhoto").src = photoUrl;
                    document.getElementById("congratsMessage").innerHTML = `${studentInfo.name}, you’ve passed your exams with a ${percentage}% score! Well done!`;
                    document.getElementById("congratsModal").style.display = "block";
                    document.getElementById("progressCardContainer").innerHTML = progressHTML;
                    
                } else {
                    // Show Progress Card Directly for Failed Students
                    document.getElementById("progressCardContainer").innerHTML = progressHTML;
                    document.getElementById("progressCardContainer").style.display = "flex";
                    document.getElementById("printBtn").style.display = "flex";
                    document.getElementById("searchField").style.display = "none";
                }
            }
        }

        function resultHold(studentInfo) {
            let progressHTML = `
                <div id="progressCard">
                    <h1 class="arabic" style="margin-bottom:0px;">KYHSS ATHAVANAD</h1>
                    <img id="loginemblom3" src="https://drive.google.com/thumbnail?id=1BKHBRTLhL6xokJ-Bz8fkM3hjllsKIqvb&sz=800" width="150" height="150">
                    <h2 style="margin-top:0px;margin-bottom:0.3em;" class="malayalam">School Code: 19094; HSS Code:11118</h2>
                    <h3 style="margin-top: 0.2em;">PMSA ORPHANAGE CAMPUS KATTILANGADI</h3>
                    <div class="progress-card">
                        <p style="display: flex; gap: 10px; font-size:16px;"><strong>Name of Student: </strong><span style="color:red; font-weight:bold;">${studentInfo.name}</span></p>
                        <p style="font-size:16px;"><strong>Admission Number:</strong> ${studentInfo.adnumber}</p>
                        <p style="font-size:16px;"><strong>Class:</strong> ${studentInfo.class || ""}</p>
                        <table border="1" cellspacing="0" cellpadding="5" style="width: 100%; text-align: center;">
                            <tr><th>Subject</th><th>Te Marks</th><th>Ce Marks</th><th>Grade</th><th>Status</th></tr>
                            <tr><td colspan="5" style="color: red; background-color: rgb(175, 233, 27); font-size: 18px;">Your Result is withheld due to Incomplete Fees Dues. Contact office for further details.</td></tr>
                        </table>
                    </div>
                </div>
            `;
            document.getElementById("printBtn").style.display = "flex";
            document.getElementById("searchField").style.display = "none";
            document.getElementById("progressCardContainer").innerHTML = progressHTML;
            document.getElementById("progressCardContainer").style.display = "flex";
        }

        
    </script>
</body>
</html>
